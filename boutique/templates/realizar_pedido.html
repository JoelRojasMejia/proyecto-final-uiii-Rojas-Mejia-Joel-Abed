{% extends 'base.html' %}

{% block title %}Realizar Pedido - AZR BOUTIQUE{% endblock %}

{% block content %}
<h1 style="color: var(--cafe-oscuro); margin-bottom: 2rem;">Confirmar Pedido</h1>

<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
    <!-- Resumen del pedido -->
    <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
        <h3 style="color: var(--cafe-medio); margin-bottom: 1rem;">Resumen de tu pedido</h3>
        
        {% for item in carrito.items.all %}
        <div style="display: flex; justify-content: between; align-items: center; padding: 1rem 0; border-bottom: 1px solid #eee;">
            <div style="flex: 1;">
                <h4 style="margin-bottom: 0.5rem;">{{ item.producto.nombre_producto }}</h4>
                <p style="color: var(--texto-claro); margin-bottom: 0;">Cantidad: {{ item.cantidad }}</p>
            </div>
            <div style="text-align: right;">
                <p style="font-weight: bold;">${{ item.subtotal }}</p>
            </div>
        </div>
        {% endfor %}
        
        <div style="border-top: 2px solid var(--cafe-medio); padding-top: 1rem; margin-top: 1rem;">
            <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold;">
                <span>Total:</span>
                <span>${{ carrito.total_carrito }}</span>
            </div>
        </div>
    </div>
    
    <!-- Formulario de pago -->
    <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
        <h3 style="color: var(--cafe-medio); margin-bottom: 1rem;">Método de pago</h3>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="id_metodo_de_pago">Selecciona método de pago:</label>
                {{ form.metodo_de_pago }}
            </div>
            
            <div style="background: #f9f9f9; padding: 1rem; border-radius: 5px; margin: 1rem 0;">
                <h4 style="color: var(--cafe-oscuro); margin-bottom: 0.5rem;">Información de entrega</h4>
                <p style="margin-bottom: 0.5rem;"><strong>Cliente:</strong> {{ user.nombre }} {{ user.apellido }}</p>
                <p style="margin-bottom: 0;"><strong>Teléfono:</strong> {{ user.numero_telefonico|default:"Por agregar" }}</p>
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem; margin-top: 1rem;">
                Confirmar Pedido
            </button>
            
            <a href="{% url 'carrito' %}" class="btn btn-outline" style="width: 100%; padding: 1rem; margin-top: 0.5rem; text-align: center; display: block; color: var(--cafe-medio); border-color: var(--cafe-medio);">
                Volver al Carrito
            </a>
        </form>
    </div>
</div>

<style>
    .form-group select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
        margin-top: 0.5rem;
        background-color: var(--blanco);
        color: var(--gris-oscuro);
    }
    
    .form-group select:focus {
        outline: none;
        border-color: var(--rojo-carmesí); /* Antes era café, ahora va con la nueva paleta */
        box-shadow: 0 0 4px var(--rojo-carmesí);
    }
</style>

{% endblock %}