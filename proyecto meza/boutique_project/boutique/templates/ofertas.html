{% extends 'base.html' %}

{% block title %}Ofertas - AZR BOUTIQUE{% endblock %}

{% block content %}
<h1 style="color: var(--cafe-oscuro); margin-bottom: 2rem;">Ofertas Especiales</h1>

{% if ofertas %}
<div class="product-grid">
    {% for oferta in ofertas %}
    <div class="product-card" style="border: 2px solid #ff6b6b; position: relative;">
        <div style="position: absolute; top: 10px; right: 10px; background: #ff6b6b; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: bold; z-index: 1;">
            {% if oferta.tipo_descuento == 'porcentaje' %}
                -{{ oferta.valor_descuento }}%
            {% else %}
                -${{ oferta.valor_descuento }}
            {% endif %}
        </div>
        
        {% if oferta.imagen %}
        <img src="{{ oferta.imagen.url }}" alt="{{ oferta.nombre }}" class="product-image">
        {% else %}
        <img src="/media/ofertas/default.jpg" alt="{{ oferta.nombre }}" class="product-image">
        {% endif %}
        
        <div class="product-info">
            <h3 style="color: #ff6b6b;">{{ oferta.nombre }}</h3>
            <p style="margin-bottom: 1rem;">{{ oferta.descripcion }}</p>
            
            {% if oferta.productos.all %}
            <div style="margin-bottom: 1rem;">
                <strong>Productos incluidos:</strong>
                <ul style="margin-top: 0.5rem; padding-left: 1rem;">
                    {% for producto in oferta.productos.all %}
                    <li>{{ producto.nombre_producto }} - ${{ producto.precio }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                <span style="font-size: 0.9rem; color: var(--texto-claro);">
                    Válida hasta: {{ oferta.fecha_fin|date:"d/m/Y" }}
                </span>
                {% if user.is_authenticated %}
                <a href="{% url 'productos' %}" class="btn btn-primary">Ver Productos</a>
                {% else %}
                <a href="{% url 'login' %}" class="btn btn-outline" style="color: var(--cafe-medio); border-color: var(--cafe-medio);">Inicia sesión para comprar</a>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; padding: 4rem;">
    <h3 style="color: var(--texto-claro); margin-bottom: 1rem;">No hay ofertas disponibles en este momento</h3>
    <p style="color: var(--texto-claro); margin-bottom: 2rem;">Vuelve pronto para descubrir nuestras promociones especiales</p>
    <a href="{% url 'productos' %}" class="btn btn-primary">Ver Productos Regulares</a>
</div>
{% endif %}
{% endblock %}